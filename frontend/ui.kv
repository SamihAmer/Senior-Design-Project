ScreenManagement:
    IntroScreen:
    MainScreen:
    MotionExam:
    Results:

<IntroScreen>:
    name: "intro"

    BoxLayout:
        orientation: 'vertical'
        padding: 0
        Label:
            text: "CSANS Eye Tracker"
            color: (.9,.9,.9,1)
            font_size: 120
            size_hint: 1, .3
        Image:
            source: 'logo.png'
            size: self.texture_size
            size_hint: 1, .5
        Button:
            font_size: 60
            size_hint: .2, .1
            pos_hint: {'center_x': 0.5}
            text: "Begin"
            on_release: app.root.current = "main"

<MainScreen>:
    name: "main"

    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Please ensure your entire face is within the frame."
            color: (.9,.9,.9,1)
            font_size: 80
            size_hint: 1, .2
        CameraPreview:
            size: root.size
        Button:
            font_size: 60
            pos_hint: {'center_x': 0.5}
            size_hint: .4, .1
            text: "Initiate Motion Exam"
            on_release:
                app.root.current = "exam"
                app.face_mesh()
        # Button:
        #     font_size: 20
        #     size_hint: 1,.1
        #     text: "Initiate Face Tracking"
        #     on_release: import Iris_Face_Mesh

<MotionExam>:
    name: "exam"

    BoxLayout:
        orientation: 'vertical'
        # FaceMesh:
        #     size: root.size
        Video:
            size_hint: 1, 1
            source: "ball.mp4"
            state: "play"
        # Image:
        #     # this is where the video will show
        #     # the id allows easy access
        #     id: vid
        #     size_hint: 1, 0.6
        #     allow_stretch: True  # allow the video image to be scaled
        #     keep_ratio: True  # keep the aspect ratio so people don't look squashed
        #     pos_hint: {'center_x':0.5, 'top':0.8}
        Button:
            font_size: 60
            pos_hint: {'center_x': 0.5}
            size_hint: .4, .1
            text: "Results"
            on_release:
                app.root.current = "results"
                root.manager.get_screen("results").ids.left.reload()
                root.manager.get_screen("results").ids.right.reload()

<Results>:
    name: "results"

    BoxLayout:
        orientation: 'horizontal'
        Image:
            id: left
            source: 'left_pupil.png'
        Image:
            id: right
            source: 'right_pupil.png'

    # Widget:
    #     id: ball
    #     my_pos: (0, 0)
    #     my_color: (1, 0, 0, 0)
    #     canvas:
    #         Color:
    #             rgba: self.my_color
    #         Ellipse:
    #             size: 25 , 25
    #             angle_start: 0
    #             angle_end: 360
    #             pos: self.my_pos
